define("base/jquery_form",[],function(){function e(e){(function(t){"use strict";function n(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(this).ajaxSubmit(n))}function i(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var o=i.closest("[type=submit]");if(0===o.length)return;n=o[0]}var a=this;if(a.clk=n,"image"==n.type)if(void 0!==e.offsetX)a.clk_x=e.offsetX,a.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var r=i.offset();a.clk_x=e.pageX-r.left,a.clk_y=e.pageY-r.top}else a.clk_x=e.pageX-n.offsetLeft,a.clk_y=e.pageY-n.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function o(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var a={};a.fileapi=void 0!==t("<input type='file'/>").get(0).files,a.formdata=void 0!==window.FormData;var r=!!t.fn.prop;t.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(n){function i(e){var n,i,o=t.param(e).split("&"),a=o.length,r=[];for(n=0;a>n;n++)o[n]=o[n].replace(/\+/g," "),i=o[n].split("="),r.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return r}function s(o){for(var a=new FormData,r=0;o.length>r;r++)a.append(o[r].name,o[r].value);if(n.extraData){var s=i(n.extraData);for(r=0;s.length>r;r++)s[r]&&a.append(s[r][0],s[r][1])}n.data=null;var l=t.extend(!0,{},t.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:c||"POST"});n.uploadProgress&&(l.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,i=e.loaded||e.position,o=e.total;e.lengthComputable&&(t=Math.ceil(100*(i/o))),n.uploadProgress(e,i,o,t)},!1),t}),l.data=null;var _=l.beforeSend;return l.beforeSend=function(e,t){t.data=a,_&&_.call(this,e,t)},t.ajax(l)}function l(e){function i(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){o("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){o("cannot get iframe.contentDocument: "+n),t=e.document}return t}function a(){function e(){try{var t=i(g).readyState;o("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(n){o("Server abort: ",n," (",n.name,")"),s($),y&&clearTimeout(y),y=void 0}}var n=u.attr2("target"),a=u.attr2("action");k.setAttribute("target",f),c||k.setAttribute("method","POST"),a!=d.url&&k.setAttribute("action",d.url),d.skipEncodingOverride||c&&!/post/i.test(c)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(y=setTimeout(function(){x=!0,s(T)},d.timeout));var r=[];try{if(d.extraData)for(var l in d.extraData)d.extraData.hasOwnProperty(l)&&(t.isPlainObject(d.extraData[l])&&d.extraData[l].hasOwnProperty("name")&&d.extraData[l].hasOwnProperty("value")?r.push(t('<input type="hidden" name="'+d.extraData[l].name+'">').val(d.extraData[l].value).appendTo(k)[0]):r.push(t('<input type="hidden" name="'+l+'">').val(d.extraData[l]).appendTo(k)[0]));d.iframeTarget||(m.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1)),setTimeout(e,15);try{k.submit()}catch(_){var h=document.createElement("form").submit;h.apply(k)}}finally{k.setAttribute("action",a),n?k.setAttribute("target",n):u.removeAttr("target"),t(r).remove()}}function s(e){if(!v.aborted&&!S){if(D=i(g),D||(o("cannot access response document"),e=$),e===T&&v)return v.abort("timeout"),E.reject(v,"timeout"),void 0;if(e==$&&v)return v.abort("server abort"),E.reject(v,"error","server abort"),void 0;if(D&&D.location.href!=d.iframeSrc||x){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var n,a="success";try{if(x)throw"timeout";var r="xml"==d.dataType||D.XMLDocument||t.isXMLDoc(D);if(o("isXml="+r),!r&&window.opera&&(null===D.body||!D.body.innerHTML)&&--I)return o("requeing onLoad callback, DOM not available"),setTimeout(s,250),void 0;var l=D.body?D.body:D.documentElement;v.responseText=l?l.innerHTML:null,v.responseXML=D.XMLDocument?D.XMLDocument:D,r&&(d.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e]},l&&(v.status=Number(l.getAttribute("status"))||v.status,v.statusText=l.getAttribute("statusText")||v.statusText);var c=(d.dataType||"").toLowerCase(),_=/(json|script|text)/.test(c);if(_||d.textarea){var u=D.getElementsByTagName("textarea")[0];if(u)v.responseText=u.value,v.status=Number(u.getAttribute("status"))||v.status,v.statusText=u.getAttribute("statusText")||v.statusText;else if(_){var f=D.getElementsByTagName("pre")[0],p=D.getElementsByTagName("body")[0];f?v.responseText=f.textContent?f.textContent:f.innerText:p&&(v.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==c&&!v.responseXML&&v.responseText&&(v.responseXML=O(v.responseText));try{N=C(v,c,d)}catch(w){a="parsererror",v.error=n=w||a}}catch(w){o("error caught: ",w),a="error",v.error=n=w||a}v.aborted&&(o("upload aborted"),a=null),v.status&&(a=v.status>=200&&300>v.status||304===v.status?"success":"error"),"success"===a?(d.success&&d.success.call(d.context,N,"success",v),E.resolve(v.responseText,"success",v),h&&t.event.trigger("ajaxSuccess",[v,d])):a&&(void 0===n&&(n=v.statusText),d.error&&d.error.call(d.context,v,a,n),E.reject(v,"error",n),h&&t.event.trigger("ajaxError",[v,d,n])),h&&t.event.trigger("ajaxComplete",[v,d]),h&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,v,a),S=!0,d.timeout&&clearTimeout(y),setTimeout(function(){d.iframeTarget||m.remove(),v.responseXML=null},100)}}}var l,_,d,h,f,m,g,v,w,b,x,y,k=u[0],E=t.Deferred();if(e)for(_=0;p.length>_;_++)l=t(p[_]),r?l.prop("disabled",!1):l.removeAttr("disabled");if(d=t.extend(!0,{},t.ajaxSettings,n),d.context=d.context||d,f="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=t(d.iframeTarget),b=m.attr2("name"),b?f=b:m.attr2("name",f)):(m=t('<iframe name="'+f+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";o("aborting upload... "+n),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(i){}m.attr("src",d.iframeSrc),v.error=n,d.error&&d.error.call(d.context,v,n,e),h&&t.event.trigger("ajaxError",[v,d,n]),d.complete&&d.complete.call(d.context,v,n)}},h=d.global,h&&0===t.active++&&t.event.trigger("ajaxStart"),h&&t.event.trigger("ajaxSend",[v,d]),d.beforeSend&&d.beforeSend.call(d.context,v,d)===!1)return d.global&&t.active--,E.reject(),E;if(v.aborted)return E.reject(),E;w=k.clk,w&&(b=w.name,b&&!w.disabled&&(d.extraData=d.extraData||{},d.extraData[b]=w.value,"image"==w.type&&(d.extraData[b+".x"]=k.clk_x,d.extraData[b+".y"]=k.clk_y)));var T=1,$=2,j=t("meta[name=csrf-token]").attr("content"),z=t("meta[name=csrf-param]").attr("content");z&&j&&(d.extraData=d.extraData||{},d.extraData[z]=j),d.forceSync?a():setTimeout(a,10);var N,D,S,I=50,O=t.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},M=t.parseJSON||function(e){return window.eval("("+e+")")},C=function(e,n,i){var o=e.getResponseHeader("content-type")||"",a="xml"===n||!n&&o.indexOf("xml")>=0,r=a?e.responseXML:e.responseText;return a&&"parsererror"===r.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(r=i.dataFilter(r,n)),"string"==typeof r&&("json"===n||!n&&o.indexOf("json")>=0?r=M(r):("script"===n||!n&&o.indexOf("javascript")>=0)&&t.globalEval(r)),r};return E}if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var c,_,d,u=this;"function"==typeof n&&(n={success:n}),c=n.type||this.attr2("method"),_=n.url||this.attr2("action"),d="string"==typeof _?t.trim(_):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),n=t.extend(!0,{url:d,success:t.ajaxSettings.success,type:c||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var h={};if(this.trigger("form-pre-serialize",[this,n,h]),h.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=n.traditional;void 0===f&&(f=t.ajaxSettings.traditional);var m,p=[],g=this.formToArray(n.semantic,p);if(n.data&&(n.extraData=n.data,m=t.param(n.data,f)),n.beforeSubmit&&n.beforeSubmit(g,this,n)===!1)return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,n,h]),h.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(g,f);m&&(v=v?v+"&"+m:m),"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+v,n.data=null):n.data=v;var w=[];if(n.resetForm&&w.push(function(){u.resetForm()}),n.clearForm&&w.push(function(){u.clearForm(n.includeHidden)}),!n.dataType&&n.target){var b=n.success||function(){};w.push(function(e){var i=n.replaceTarget?"replaceWith":"html";t(n.target)[i](e).each(b,arguments)})}else n.success&&w.push(n.success);if(n.success=function(e,t,i){for(var o=n.context||this,a=0,r=w.length;r>a;a++)w[a].apply(o,[e,t,i||u,u])},n.error){var x=n.error;n.error=function(e,t,i){var o=n.context||this;x.apply(o,[e,t,i,u])}}if(n.complete){var y=n.complete;n.complete=function(e,t){var i=n.context||this;y.apply(i,[e,t,u])}}var k=t('input[type=file]:enabled[value!=""]',this),E=k.length>0,T="multipart/form-data",$=u.attr("enctype")==T||u.attr("encoding")==T,j=a.fileapi&&a.formdata;o("fileAPI :"+j);var z,N=(E||$)&&!j;n.iframe!==!1&&(n.iframe||N)?n.closeKeepAlive?t.get(n.closeKeepAlive,function(){z=l(g)}):z=l(g):z=(E||$)&&j?s(g):t.ajax(n),u.removeData("jqxhr").data("jqxhr",z);for(var D=0;p.length>D;D++)p[D]=null;return this.trigger("form-submit-notify",[this,n]),this},t.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!t.isReady&&a.s?(o("DOM not ready, queuing ajaxForm"),t(function(){t(a.s,a.c).ajaxForm(e)}),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,n).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,e,n).on("click.form-plugin",this.selector,e,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,n).bind("click.form-plugin",e,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,n){var i=[];if(0===this.length)return i;var o=this[0],r=e?o.getElementsByTagName("*"):o.elements;if(!r)return i;var s,l,c,_,d,u,h;for(s=0,u=r.length;u>s;s++)if(d=r[s],c=d.name,c&&!d.disabled)if(e&&o.clk&&"image"==d.type)o.clk==d&&(i.push({name:c,value:t(d).val(),type:d.type}),i.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if(_=t.fieldValue(d,!0),_&&_.constructor==Array)for(n&&n.push(d),l=0,h=_.length;h>l;l++)i.push({name:c,value:_[l]});else if(a.fileapi&&"file"==d.type){n&&n.push(d);var f=d.files;if(f.length)for(l=0;f.length>l;l++)i.push({name:c,value:f[l],type:d.type});else i.push({name:c,value:"",type:d.type})}else null!==_&&_!==void 0&&(n&&n.push(d),i.push({name:c,value:_,type:d.type,required:d.required}));if(!e&&o.clk){var m=t(o.clk),p=m[0];c=p.name,c&&!p.disabled&&"image"==p.type&&(i.push({name:c,value:m.val()}),i.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var i=this.name;if(i){var o=t.fieldValue(this,e);if(o&&o.constructor==Array)for(var a=0,r=o.length;r>a;a++)n.push({name:i,value:o[a]});else null!==o&&o!==void 0&&n.push({name:this.name,value:o})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,o=this.length;o>i;i++){var a=this[i],r=t.fieldValue(a,e);null===r||void 0===r||r.constructor==Array&&!r.length||(r.constructor==Array?t.merge(n,r):n.push(r))}return n},t.fieldValue=function(e,n){var i=e.name,o=e.type,a=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!e.checked||("submit"==o||"image"==o)&&e.form&&e.form.clk!=e||"select"==a&&-1==e.selectedIndex))return null;if("select"==a){var r=e.selectedIndex;if(0>r)return null;for(var s=[],l=e.options,c="select-one"==o,_=c?r+1:l.length,d=c?r:0;_>d;d++){var u=l[d];if(u.selected){var h=u.value;if(h||(h=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),c)return h;s.push(h)}}return s}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,o=this.tagName.toLowerCase();n.test(i)||"textarea"==o?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1})(e)}return e});